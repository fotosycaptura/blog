<!DOCTYPE html>
<html lang="es">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:image" content="https://fotosycaptura.cl/extras/ms-icon-310x310.png" />
  <meta property="og:image:secure_url" content="https://fotosycaptura.cl/extras/ms-icon-310x310.png" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="800" />
  <title>Guía casi completa XD: Instalando y configurando docker | https://fotosycaptura.cl
</title>
  <link rel="canonical" href="https://fotosycaptura.cl/posts/2024-10-01-instalando-y-configurando-docker.html">

  <link rel="alternate" type="application/atom+xml" href="https://fotosycaptura.cl/feeds/all.atom.xml" title="Full Atom Feed">

  <link rel="apple-touch-icon" href="https://fotosycaptura.cl/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://fotosycaptura.cl/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://fotosycaptura.cl/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://fotosycaptura.cl/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://fotosycaptura.cl/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://fotosycaptura.cl/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fotosycaptura.cl/theme/css/pygments/native.min.css">
  <link rel="stylesheet" href="https://fotosycaptura.cl/theme/css/style.css">


<meta name="description" content="En esta guía, aprenderás desde los conceptos básicos de Docker, la instalación y configuración inicial, hasta cómo crear y gestionar contenedores con archivos persistentes usando docker-compose. Usaremos como ejemplo un entorno donde configuramos un contenedor nginx, manejando todo mediante un archivo de configuración denominado: docker-compose.yml.">
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <a href="https://fotosycaptura.cl">
            <img class="img-fluid" src=https://fotosycaptura.cl/images/logo.jpg width=200 height=200 alt="https://fotosycaptura.cl">
          </a>
        </div>
        <div class="col-sm-8">
          <h1 class="title"><a href="https://fotosycaptura.cl">https://fotosycaptura.cl</a></h1>
          <p class="text-muted">Bit&aacute;cora personal del capit&aacute;n @fotosycaptura ✨</p>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="https://fotosycaptura.cl/pages/links.html">Blogroll</a></li>
            <li class="list-inline-item"><a href="https://fotosycaptura.cl/pages/libro-firmas.html">Libro de Firmas</a></li>
            <li class="list-inline-item"><a href="https://fotosycaptura.cl/posts/aboutme.html">Acerca de</a></li>
            <li class=" list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a class="fa fa-instagram" href="https://www.instagram.com/fotosycaptura" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-twitter" href="https://www.twitter.com/fotosycaptura" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-tumblr" href="https://fotosycaptura.tumblr.com" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-youtube" href="https://www.youtube.com/user/charsxcx/featured" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/fotosycaptura" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-rss" href="http://fotosycaptura.cl//feeds/all.atom.xml" target="_blank"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>Guía casi completa XD: Instalando y configurando docker
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2024-10-01T22:13:00-03:00">
        <i class="fa fa-clock-o"></i>
        mar, 01 octubre
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://fotosycaptura.cl/category/laboratorio.html">Laboratorio</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://fotosycaptura.cl/author/fotosycaptura.html">@fotosycaptura</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://fotosycaptura.cl/tag/blog.html">#blog</a>,         <a href="https://fotosycaptura.cl/tag/docker.html">#docker</a>,         <a href="https://fotosycaptura.cl/tag/contenedor.html">#contenedor</a>,         <a href="https://fotosycaptura.cl/tag/laboratorio.html">#laboratorio</a>      </li>
    </ul>
  </header>
  <div class="content">
    <h2>¿Qué es docker?</h2>
<p>Docker es una plataforma que permite automatizar el despliegue de aplicaciones en contenedores. Los contenedores son entornos ligeros y portátiles que contienen todo lo necesario para ejecutar una aplicación, como el código, las bibliotecas y las dependencias necesarias.</p>
<p>Las ventajas que posee, si te dedicas por ejemplo al desarrollo, son varias: portabilidad, aislamiento, facilidad de despliegue, son algunas de sus ventajas...</p>
<h2>Instalando docker</h2>
<p>Lo primero será instalar docker en tu distribución de Linux. Dependiendo de la distro que uses puede que varíe un poco las sentencias, pero por ejemplo en mi caso al usar arch:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>pacman<span class="w"> </span>-Syu<span class="w"> </span>docker<span class="w"> </span>docker-compose<span class="w"> </span>containerd
</code></pre></div>

<h2>Agregando el usuario al grupo docker</h2>
<p>Para que funcione de forma correcta lo que tendrás que hacer será lo siguiente:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span>USUARIO
</code></pre></div>

<p>Donde <em>USUARIO</em> será tu usuario. Luego deberás crear el grupo con:</p>
<div class="highlight"><pre><span></span><code>newgrp<span class="w"> </span>docker
</code></pre></div>

<p>Podrás comprobar si todo está ben con el comando <strong>groups</strong> en la terminal.</p>
<p>También puedes corroborarlo con</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/etc/group<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>docker
</code></pre></div>

<h2>Levantando el servicio</h2>
<p>Una vez que haya finalizado, lo siguiente será iniciar el servicio a demanda o dejarlo habilitado para que se ejecute de forma permanente, bueno, esto dependerá de como lo quieras manejar. En mi caso, basta con hacer un:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker.service
</code></pre></div>

<p>Con esto, el servicio se estará ejecutando y podrás consultar su estado mediante:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>docker.service
</code></pre></div>

<h2>Nuestro primer contenedor</h2>
<p>Supongamos que tengo un pequeño sitio web como por ejemplo el de <a href="secpo.cl">https://secpo.cl</a>. El sitio Web en cuestión, es un sitio de contenido estático. Para el ejemplo es perfecto.</p>
<p>Entonces, iremos a nuestro directorio de desarrollo o de pruebas, o el que tengas. Y crearás un directorio que contendrá el sitio web así como el archivo <mark>docker-compose.yml</mark>.</p>
<p>Para ello, habrá que crear el mentado archivo <mark>docker-compose.yml</mark></p>
<p>Bastará con que ejecutes tu editor de texto favorito en la terminal, en mi caso <em>vim</em>, seguido del nombre del archivo, así:</p>
<div class="highlight"><pre><span></span><code>vim<span class="w"> </span>docker-compose.yml
</code></pre></div>

<p>Tienes que pensar, que la estructura de directorios <em>final</em> deberá quedar algo similar a esto:</p>
<div class="highlight"><pre><span></span><code>├── docker-compose.yml
├── web
    └── index.html  # Si tienes uno personalizado
    └── css/        # Resto de archivos css, y así...
</code></pre></div>

<p>Bueno, el archivo docker-compose deberá tener algo como esto:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:latest</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secpo-cn</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">NGINX_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secpo.cl</span>
<span class="w">      </span><span class="nt">NGINX_PORT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./web:/usr/share/nginx/html</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;80:80&quot;</span><span class="w"> </span><span class="c1"># Puedes cambiar el primer puerto más a la izquierda, por ejemplo 8080:80</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</code></pre></div>

<p>Debes de ser bien <em>cuidadoso</em> en lo que a identación respecta. Docker es bien riguroso en este aspecto.</p>
<blockquote>
<p>En el caso del <mark>8080:80</mark>, el primer puerto (8080), será el puerto que se podrá visualizar desde el equipo anfitrión.</p>
</blockquote>
<p>Una vez completado, solo quedará guardar todo y salir del editor <em>vim</em>.</p>
<h2>Ejecutando el contenedor</h2>
<p>Si todo ha ido bien, ya solo quedará realizar lo siguiente desde la terminal:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div>

<p>Si deseas lanzarlo de manera que quede ejecutándose aún si presionas control+c o sales de la terminal, deberás agregar el parámetro <mark>-d</mark>.</p>
<h2>¿El contenedor está ejecutándose?</h2>
<p>Eso se puede observar mediante la ejecución de:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>ps
</code></pre></div>

<p>Si quisieras detener el contendor, nada mejor que:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>stop<span class="w"> </span>ID
</code></pre></div>

<p>Donde <em>ID</em> será el hash raro que se suele observar al utilizar <em>docker ps</em></p>
<p>Si no has usado el parámetro <mark>-d</mark>, será entonces solo cosa de usar las teclas control+c en la terminal donde se encuentra ejecutándose el contenedor.</p>
<p>Si quieres acceder al contenedor para cambiar alguna configuración en caso de que algo no haya salido como quieres, puedes <em>ingresar</em> mediante:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>NOMBRE_O_ID<span class="w"> </span>/bin/bash
</code></pre></div>

<p>Donde el <em>NOMBRE_O_ID</em> corresponderá al hash o al nombre si es que lo has nombrado.</p>
<p>Si tienes demasiados contenedores, puedes detenerlos todos usando:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>stop<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-aq<span class="k">)</span>
</code></pre></div>

<p>Bueno, eliminar tanto contenedores como imagenes es sencillo también.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>rm<span class="w"> </span>NOMBRE_O_ID
</code></pre></div>

<p>Si lo que deseas, es eliminar una imagen, entonces deberás usar:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>rmi<span class="w"> </span>NOMBRE_O_ID
</code></pre></div>

<p>Ojo que siempre tienes que estar seguro de lo que haces, y de que el contenedor esté detenido, de lo contrario, ya sabes...</p>
<h2>Conclusión</h2>
<p>Bueno, como has visto, todos estos comandos te permiten gestionar y desplegar aplicaciones de manera rápida. Siguiendo esta guía, has aprendido (o quizás no XD), cómo configurar un entorno completo, aunque sea un sitio Web simple. Lo siguiente será experimentar con <em>mysql</em>, sitios más complejos... En fin... Tienes harto por investigar joven padawan... XDD</p>
<p>Pero en serio, creo que está todo lo básico para comenzar y experimentar...</p>
  </div>
</article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://fotosycaptura.cl/authors.html">Autores</a></li>
          <li class="list-inline-item"><a href="https://fotosycaptura.cl/archives.html">Archivados</a></li>
          <li class="list-inline-item"><a href="https://fotosycaptura.cl/categories.html">Carpetas</a></li>
          <li class="list-inline-item"><a href="https://fotosycaptura.cl/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
		Visitas <img src="https://counter4.whocame.ovh/private/contadorvisitasgratis.php?c=ytntbfglwxdg259x6h7frf6ybfzar8zb" title="contador de visitas" alt="contador de visitas"><a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>